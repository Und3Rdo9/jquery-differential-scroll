/*! Differential Scroll - v0.1.0 - 2016-04-24
* https://github.com/Und3Rdo9/jquery-differential-scroll
* Copyright (c) 2016 Tim Bakkum; Licensed MIT */
!function(a){"use strict";var b={breakpoint:"(min-width: 40em)",offsetTop:0,offsetBottom:0},c=function(b,c){this.elem=b,this.$container=a(b),this.options=c,this.metadata=this.$container.data("differential-scroll-options"),this.$columns=this.$container.find(".differential-scroll-column"),this.$smallestColumn=null,this.$tallestColumn=null,this.smallestSide="",this.tallestSide="",this.isLaunched=!1,this.fixedStatus="",this.windowTop="",this.windowHeight="",this.windowBottom="",this.containerTop="",this.getWindowTop=function(){return a(window).scrollTop()},this.getWindowHeight=function(){return a(window).height()},this.getWindowBottom=function(){return this.getWindowTop()+this.getWindowHeight()}};c.prototype={version:"0.0.1",mediaQuery:window.matchMedia(b.breakpoint),mediaQueryCheck:function(b){b.matches===!0?(this.evalScrollPosition(),this.isLaunched===!1&&(a(window).on("scroll.differentialScroll resize.differentialScroll",this.evalScrollPosition.bind(this)),this.isLaunched=!0)):b.matches===!1&&(this.isLaunched===!0&&(a(window).off("scroll.differentialScroll resize.differentialScroll"),this.isLaunched=!1),this.fixedStatus="",this.unstyleContainer(),this.unstyleColumns())},init:function(){this.config=a.extend({},b,this.options,this.metadata),this.mediaQuery=window.matchMedia(this.config.breakpoint);var c=this.mediaQuery;return this.mediaQuery.addListener(this.mediaQueryCheck.bind(this)),this.mediaQueryCheck(c),this},evalColumns:function(){2===this.$columns.length?this.$columns.first().outerHeight()<this.$columns.last().outerHeight()?(this.$smallestColumn=this.$columns.first(),this.$tallestColumn=this.$columns.last(),this.smallestSide="left",this.tallestSide="right"):this.$columns.first().outerHeight()>this.$columns.last().outerHeight()?(this.$smallestColumn=this.$columns.last(),this.$tallestColumn=this.$columns.first(),this.smallestSide="right",this.tallestSide="left"):this.$columns.first().outerHeight()===this.$columns.last().outerHeight()&&(this.$smallestColumn=null,console.log("columns are the same height, no need to apply differential scroll effect")):(this.$smallestColumn=null,console.error("you must have two columns!"))},styleContainer:function(){this.$container.css({position:"relative",overflow:"hidden",height:this.$tallestColumn.outerHeight()})},unstyleContainer:function(){this.$container.css({position:"initial",overflow:"initial",height:"auto"})},unstyleColumns:function(){this.$columns.css({position:"relative",top:"auto",bottom:"auto",right:"auto",left:"auto"})},fixToTopScreen:function(){this.fixedStatus="top-screen",this.$smallestColumn.css({position:"absolute",top:this.getWindowTop()-this.containerTop+"px",bottom:"auto"}).css(this.smallestSide,0)},fixToBottomContainer:function(){"bottom-container"!==this.fixedStatus&&(this.fixedStatus="bottom-container",this.$smallestColumn.css({position:"absolute",top:"auto",bottom:"0"}).css(this.smallestSide,0))},fixToTopContainer:function(){"top-container"!==this.fixedStatus&&(this.fixedStatus="top-container",this.$smallestColumn.css({position:"absolute",top:"0",bottom:"auto"}).css(this.smallestSide,0))},fixToBottomScreen:function(){this.fixedStatus="middle",this.$smallestColumn.css({position:"absolute",top:"auto",bottom:this.$tallestColumn.outerHeight()-(this.getWindowTop()+this.getWindowHeight()-this.containerTop)+"px"}).css(this.smallestSide,0)},positionTallestColumn:function(){this.$tallestColumn.css({position:"absolute",top:"0",bottom:"auto"}).css(this.tallestSide,0)},evalScrollPosition:function(){this.evalColumns(),this.windowTop=this.getWindowTop(),this.windowHeight=this.getWindowHeight(),this.windowBottom=this.getWindowBottom(),null!==this.$smallestColumn&&this.$tallestColumn.outerHeight()>this.windowHeight?(this.styleContainer(),this.positionTallestColumn(),this.containerTop=this.$container.offset().top,this.$smallestColumn.outerHeight()<=this.windowHeight?this.windowTop<=this.containerTop?this.fixToTopContainer():this.windowTop>this.containerTop&&this.windowTop<this.containerTop+(this.$tallestColumn.outerHeight()-this.$smallestColumn.outerHeight())&&this.windowTop<this.containerTop+this.$tallestColumn.outerHeight()?this.fixToTopScreen():this.windowTop>this.containerTop&&this.windowTop>=this.containerTop+(this.$tallestColumn.outerHeight()-this.$smallestColumn.outerHeight())&&this.windowBottom<this.containerTop+this.$tallestColumn.outerHeight()?this.fixToBottomContainer():this.windowTop>this.containerTop&&this.windowBottom>=this.containerTop+this.$tallestColumn.outerHeight()&&this.fixToBottomContainer():this.$smallestColumn.outerHeight()>this.windowHeight&&(this.windowTop<=this.containerTop?this.fixToTopContainer():this.windowTop>this.containerTop&&this.windowBottom>=this.containerTop+this.$smallestColumn.outerHeight()&&this.windowBottom<this.containerTop+this.$tallestColumn.outerHeight()?this.fixToBottomScreen():this.windowTop>this.containerTop&&this.windowBottom>=this.containerTop+this.$tallestColumn.outerHeight()&&this.fixToBottomContainer())):(this.unstyleColumns(),this.unstyleContainer())}},a.fn.differentialScroll=function(a){return this.each(function(){new c(this,a).init()})}}(jQuery);